{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '48245420-0c25989f875d1fe30dc45addb';\n\nexport async function fetchPhotosByQuery(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query.trim(),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching photos:', error.message);\n    throw error;\n  }\n}\n","export function creatGallery(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags = 'No tags',\n        likes = 0,\n        views = 0,\n        comments = 0,\n        downloads = 0,\n      }) =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            </a>\n            <ul class=\"inform\">\n                <li class=\"inform-item\">\n                    <h2 class=\"inform-title\">Likes:</h2>\n                    <p class=\"inform-dan\">${likes}</p>\n                </li>\n                <li class=\"inform-item\">\n                    <h2 class=\"inform-title\">Views:</h2>\n                    <p class=\"inform-dan\">${views}</p>\n                </li>\n                <li class=\"inform-item\">\n                    <h2 class=\"inform-title\">Comments:</h2>\n                    <p class=\"inform-dan\">${comments}</p>\n                </li>\n                <li class=\"inform-item\">\n                    <h2 class=\"inform-title\">Downloads:</h2>\n                    <p class=\"inform-dan\">${downloads}</p>\n                </li>\n            </ul>\n        </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast'; // Описаний у документації\nimport 'izitoast/dist/css/iziToast.min.css'; // Додатковий імпорт стилів\nimport SimpleLightbox from 'simplelightbox'; // Описаний в документації\nimport 'simplelightbox/dist/simple-lightbox.min.css'; // Додатковий імпорт стилів\n\nimport { fetchPhotosByQuery } from './js/pixabay-api';\nimport { creatGallery } from './js/render-functions';\n\nconst form = document.querySelector('.form-search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.load-more');\n\nloader.style.display = 'none';\nbtnLoadMore.style.display = 'none';\n\nlet currentQuery = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\nconst galleryModal = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst handlerSearch = async event => {\n  event.preventDefault();\n\n  currentQuery = event.target.elements.user_query.value.trim();\n  page = 1;\n  gallery.innerHTML = '';\n  btnLoadMore.style.display = 'none';\n\n  if (!currentQuery) {\n    iziToast.show({\n      backgroundColor: '#EF4040',\n      message: `Enter the data for the search!`,\n      messageColor: '#FFFFFF',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  loader.style.display = 'inline-block';\n\n  try {\n    const data = await fetchPhotosByQuery(currentQuery, page, perPage);\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        backgroundColor: '#EF4040',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        messageColor: '#FFFFFF',\n        position: 'topCenter',\n      });\n      return;\n    }\n\n    totalHits = data.totalHits;\n    gallery.insertAdjacentHTML('beforeend', creatGallery(data.hits));\n    galleryModal.refresh();\n\n    // Показуємо кнопку \"Load more\", якщо дані є\n    if (data.hits.length >= perPage) {\n      btnLoadMore.style.display = 'block';\n    }\n\n    iziToast.show({\n      backgroundColor: '#28a745',\n      message: `Hooray! We found ${totalHits} images.`,\n      messageColor: '#FFFFFF',\n      position: 'topRight',\n    });\n  } catch (error) {\n    console.error(error.message);\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later!',\n      position: 'topCenter',\n      backgroundColor: '#EF4040',\n      messageColor: '#FFFFFF',\n    });\n  } finally {\n    loader.style.display = 'none';\n    event.target.reset();\n  }\n};\n\nconst loadImgMore = async () => {\n  page += 1;\n\n  loader.style.display = 'inline-block';\n  btnLoadMore.style.display = 'none';\n\n  try {\n    const data = await fetchPhotosByQuery(currentQuery, page, perPage);\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        backgroundColor: '#EF4040',\n        message: `No more images to load.`,\n        messageColor: '#FFFFFF',\n        position: 'topCenter',\n      });\n      return;\n    }\n\n    gallery.insertAdjacentHTML('beforeend', creatGallery(data.hits));\n    galleryModal.refresh();\n\n    // Плавне прокручування сторінки\n    const galleryItem = document.querySelector('.gallery .gallery-item');\n    if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    // Перевірка, чи завантажено всі зображення\n    const totalLoaded = document.querySelectorAll(\n      '.gallery .gallery-item'\n    ).length;\n    if (totalLoaded >= totalHits) {\n      btnLoadMore.style.display = 'none';\n      iziToast.show({\n        backgroundColor: '#EF4040',\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageColor: '#FFFFFF',\n        position: 'topCenter',\n      });\n    } else {\n      btnLoadMore.style.display = 'block'; // Показуємо кнопку, якщо ще є зображення\n    }\n  } catch (error) {\n    console.error(error.message);\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later!',\n      position: 'topCenter',\n      backgroundColor: '#EF4040',\n      messageColor: '#FFFFFF',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n\nform.addEventListener('submit', handlerSearch);\nbtnLoadMore.addEventListener('click', loadImgMore);\n"],"names":["BASE_URL","API_KEY","fetchPhotosByQuery","query","page","perPage","axios","error","creatGallery","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","btnLoadMore","currentQuery","totalHits","galleryModal","SimpleLightbox","handlerSearch","event","iziToast","data","loadImgMore","galleryItem","height"],"mappings":"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"}